// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
  relationMode      = "prisma"
}


model venue {
id Int @id @default(autoincrement())
venue_name String @db.varchar(100)
address_street String @db.varchar(100)
address_city String @db.varchar(50)
address_postcode String @db.varchar(20)
address_country String @db.varchar(50)
venue_booking_notes String @db.varchar(500)
}

model booking { 
  id Int @id @default(autoincrement())
  booking_date Int @db.Date(6) 
  start_time Int  
  end_time Int @db.Time(4)	
  party_size Int
  guest_id guest @relation(fields: [guestId], references: [id]) // One guest can have many bookings / one booking can have one guest 
  venue_id venue @relation(fields: [venueId], references: [id]) // one venue can have many bookings / one booking can have one venue
  dining_table_id dining_table @relation(fields: [dining_tableId], references: [id]) //one booking can have one dining_table / one dining table can have many bookings 
  }

model guest {
  id Int @id @default(autoincrement())
  first_name String @db.varchar(50)
  last_name String @db.varchar(50)
  email String @db.varchar(100)
  phone String @db.varchar(15)
  marketing_consent Boolean @default(true)
}

model user {
  id Int @id @default(autoincrement())
  first_name String @db.varchar(50)
  last_name String @db.varchar(50)
  email String @db.varchar(100)
  role String @db.varchar(50)
  venue_id Int // one venue can have many users 
  avatar_url String @db.varchar(50)
}

model dining_table {
  id Int @id @default(autoincrement())
  table_no Int
  is_outdoor Boolean
  seats_max Int
  seats_min Int
  venue_id venue @relation(fields: [venueId], references: [id])  //one venue can have many dining tables / one dining table can have one venue 
}

model opening_hours {
  id Int @id @default(autoincrement())
  opening_hours Json
  venue_id venue @relation(fields: [venueId], references: [id])    // one venue can have one opening / one opening can have one venue / 1/1 
}
